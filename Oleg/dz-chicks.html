<html>
<head>
  <meta name="http-equiv" content="Content-type: text/html;charset=utf-8">
    <title>dz chicks</title>
<body>
  
<script>
  
var testUrl = 'http://www.mocky.io/v2/5bc8b48732000082005a00b5';

function sortFunction(a, b){
  var aE = parseInt(a.beauty) / parseInt(a.admissibility);
  var bE = parseInt(b.beauty) / parseInt(b.admissibility);
  if(aE > bE){
     return -1;
  }
  if(aE < bE){
     return 1;
  }
  return 0
};




 function load(x, func) {
      fetch(x)
        .then(function(response) {
          return response.json();
         })
        .then(function(data) {
          func(data);
        });
    };


  function afterAjax(data) {

    data.sort(sortFunction);

    console.log(data, "finaly");

    var result = [];
    var meetingPrice = 500;
    var money = 10000;

    data.forEach(function(obj){
        var admis = parseInt(obj.beauty) / parseInt(obj.admissibility);
        if(money - meetingPrice*parseInt(obj.admissibility) > 0){
            result.push(obj.name);
            money = money - meetingPrice*parseInt(obj.admissibility);
        };
    });

    console.log('res:', result);

  };



load(testUrl, afterAjax);

            
</script>


</body>

</html>